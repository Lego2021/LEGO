    BEGIN;
    CREATE TABLE t1(x, y);
    INSERT INTO t1 VALUES(1,1);
    INSERT INTO t1 VALUES(2,2);
    INSERT INTO t1 VALUES(3,2);
    INSERT INTO t1 VALUES(4,3);
    INSERT INTO t1 VALUES(5,3);
    INSERT INTO t1 VALUES(6,3);
    INSERT INTO t1 VALUES(7,3);
    INSERT INTO t1 VALUES(8,4);
    INSERT INTO t1 VALUES(9,4);
    INSERT INTO t1 VALUES(10,4);
    INSERT INTO t1 VALUES(11,4);
    INSERT INTO t1 VALUES(12,4);
    INSERT INTO t1 VALUES(13,4);
    INSERT INTO t1 VALUES(14,4);
    INSERT INTO t1 VALUES(15,4);
    INSERT INTO t1 VALUES(16,5);
    INSERT INTO t1 VALUES(17,5);
    INSERT INTO t1 VALUES(18,5);
    INSERT INTO t1 VALUES(19,5);
    INSERT INTO t1 VALUES(20,5);
    SELECT * FROM (SELECT 1);
    BEGIN;
    CREATE TABLE t3(p,q);
    INSERT INTO t3 VALUES(1,11);
    INSERT INTO t3 VALUES(2,22);
    CREATE TABLE t4(q,r);
    INSERT INTO t4 VALUES(11,111);
    INSERT INTO t4 VALUES(22,222);
  DROP TABLE IF EXISTS t1;
  CREATE TABLE t1(w INT, x INT);
  INSERT INTO t1(w,x)   VALUES(1,10),(2,20),(3,30),         (2,21),(3,31),         (3,32);
  CREATE INDEX t1wx ON t1(w,x);
  DROP TABLE IF EXISTS t2;
  CREATE TABLE t2(w INT, y VARCHAR(8));
  INSERT INTO t2(w,y) VALUES(1,'one'),(2,'two'),(3,'three'),(4,'four');
  CREATE INDEX t2wy ON t2(w,y);
  SELECT cnt, xyz, (SELECT y FROM t2 WHERE w=cnt), '|'    FROM (SELECT count(*) AS cnt, w AS xyz FROM t1 GROUP BY 2)   ORDER BY cnt, xyz;
  SELECT cnt, xyz, lower((SELECT y FROM t2 WHERE w=cnt)), '|'    FROM (SELECT count(*) AS cnt, w AS xyz FROM t1 GROUP BY 2)   ORDER BY cnt, xyz;
  SELECT cnt, xyz, '|'    FROM (SELECT count(*) AS cnt, w AS xyz FROM t1 GROUP BY 2)   WHERE (SELECT y FROM t2 WHERE w=cnt)!='two'   ORDER BY cnt, xyz;
  SELECT cnt, xyz, '|'    FROM (SELECT count(*) AS cnt, w AS xyz FROM t1 GROUP BY 2)   ORDER BY lower((SELECT y FROM t2 WHERE w=cnt));
  DROP TABLE t1;
  DROP TABLE t2;
