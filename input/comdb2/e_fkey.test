    BEGIN;
      DELETE FROM t1;
 PRAGMA foreign_keys;
    BEGIN;
      PRAGMA foreign_keys = ON;
      DELETE FROM t1;
      PRAGMA foreign_keys;
    CREATE TABLE artist(      artistid    INTEGER PRIMARY KEY,       artistname  TEXT    );
 INSERT INTO track VALUES(1, 'track 1', 1);
 INSERT INTO artist VALUES(2, 'artist 1');
 INSERT INTO track VALUES(1, 'track 1', 1);
 INSERT INTO track VALUES(1, 'track 1', 2);
 DELETE FROM artist WHERE artistid = 2;
     DELETE FROM track WHERE trackartist = 2;
    DELETE FROM artist WHERE artistid = 2;
    INSERT INTO track VALUES(1, 'track 1', NULL);
    INSERT INTO track VALUES(2, 'track 2', NULL);
    CREATE TABLE artist(      artistid    INTEGER PRIMARY KEY,       artistname  TEXT    );
    BEGIN;
      INSERT INTO track VALUES(1, 'White Christmas', 5);
    INSERT INTO artist VALUES(5, 'Bing Crosby');
    BEGIN;
        INSERT INTO t1 VALUES(4, 5);
      RELEASE one;
    UPDATE t1 SET a = 5 WHERE a = 4;
    BEGIN;
      INSERT INTO t1 VALUES(4, 4);
        INSERT INTO t1 VALUES(5, 6);
    ROLLBACK TO one;
    BEGIN;
      UPDATE parent SET p1='k' WHERE p1='j';
      DELETE FROM parent WHERE p1='l';
    BEGIN;
 DELETE FROM parent WHERE x = 'key1';
 DELETE FROM parent WHERE x = 'key2';
    UPDATE child2 SET c = NULL;
    INSERT INTO artist VALUES(1, 'Dean Martin');
    INSERT INTO artist VALUES(2, 'Frank Sinatra');
    UPDATE artist SET artistid = 100 WHERE artistname = 'Dean Martin';
 SELECT * FROM artist;
    BEGIN;
      UPDATE parent SET a = '' WHERE a = 'oNe';
    ROLLBACK;
    INSERT INTO artist VALUES(3, 'Sammy Davis Jr.');
 DELETE FROM artist WHERE artistname = 'Sammy Davis Jr.';
    INSERT INTO artist VALUES(0, 'Unknown Artist');
    DELETE FROM artist WHERE artistname = 'Sammy Davis Jr.';
 SELECT * FROM artist;
 SELECT 'xxx';
 SELECT 'xxx';
 SELECT sql FROM sqlite_master WHERE type = 'table';
    BEGIN;
      DROP TABLE p;
    ROLLBACK;
    BEGIN;
      DROP TABLE p;
    ROLLBACK;
    BEGIN;
      DROP TABLE p;
 CREATE TABLE p(a, b, PRIMARY KEY(a, b));
 INSERT INTO p VALUES('a', 'b');
    CREATE TABLE c1(c, d, FOREIGN KEY(c, d) REFERENCES a);
    INSERT INTO p VALUES(1, 2);
    INSERT INTO c1 VALUES(1, 2);
    INSERT INTO c2 VALUES(1, 2);
    INSERT INTO c3 VALUES(1, 2);
 PRAGMA foreign_keys = ON;
 DELETE FROM p;
      DROP TABLE p;
    ROLLBACK;
 SELECT sql FROM sqlite_master WHERE name = 't1';
    BEGIN;
      ALTER TABLE p RENAME TO parent;
    ROLLBACK;
    SELECT sql FROM sqlite_master WHERE name = 'c';
    BEGIN;
      DROP TABLE p;
    ROLLBACK;
    BEGIN;
 INSERT INTO ci VALUES('x', 'y');
 INSERT INTO cd VALUES('x', 'y');
     BEGIN;
    CREATE TABLE t0(a PRIMARY KEY, b);
    INSERT INTO t0 VALUES('x0', NULL);
    CREATE TABLE t0(a PRIMARY KEY);
    INSERT INTO t0 VALUES('xxx');
      INSERT INTO t1 VALUES(1, NULL);
      INSERT INTO t1 VALUES(2, 1);
      INSERT INTO t1 VALUES(3, 2);
      INSERT INTO t1 VALUES(4, 3);
      INSERT INTO t1 VALUES(5, 4);
